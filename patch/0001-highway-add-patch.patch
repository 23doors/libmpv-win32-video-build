From e1d180d959295eb460e9e7a4c326667ae94a10c0 Mon Sep 17 00:00:00 2001
From: zhongfly <11155705+zhongfly@users.noreply.github.com>
Date: Thu, 20 Apr 2023 20:35:45 +0800
Subject: [PATCH] highway: add patch

---
 ...1-Add-missing-file-in-CMakeLists.txt.patch | 24 +++++++++++++++++++
 packages/highway.cmake                        |  1 +
 2 files changed, 25 insertions(+)
 create mode 100644 packages/highway-0001-Add-missing-file-in-CMakeLists.txt.patch

diff --git a/packages/highway-0001-Add-missing-file-in-CMakeLists.txt.patch b/packages/highway-0001-Add-missing-file-in-CMakeLists.txt.patch
new file mode 100644
index 0000000..2c03656
--- /dev/null
+++ b/packages/highway-0001-Add-missing-file-in-CMakeLists.txt.patch
@@ -0,0 +1,24 @@
+From b44a14e0450a699441c4d8cd3b01fd90635ae140 Mon Sep 17 00:00:00 2001
+From: zhongfly <11155705+zhongfly@users.noreply.github.com>
+Date: Thu, 20 Apr 2023 12:32:01 +0000
+Subject: [PATCH] add missing file in CMakeLists.txt
+
+---
+ CMakeLists.txt | 1 +
+ 1 file changed, 1 insertion(+)
+
+diff --git a/CMakeLists.txt b/CMakeLists.txt
+index 2af05a9..8685c04 100644
+--- a/CMakeLists.txt
++++ b/CMakeLists.txt
+@@ -131,6 +131,7 @@ set(HWY_SOURCES
+     hwy/ops/set_macros-inl.h
+     hwy/ops/shared-inl.h
+     hwy/ops/wasm_128-inl.h
++    hwy/ops/tuple-inl.h
+     hwy/ops/x86_128-inl.h
+     hwy/ops/x86_256-inl.h
+     hwy/ops/x86_512-inl.h
+-- 
+2.40.0
+
diff --git a/packages/highway.cmake b/packages/highway.cmake
index 7491d3f..42f9d4b 100644
--- a/packages/highway.cmake
+++ b/packages/highway.cmake
@@ -3,6 +3,7 @@ ExternalProject_Add(highway
     SOURCE_DIR ${SOURCE_LOCATION}
     GIT_CLONE_FLAGS "--filter=tree:0"
     UPDATE_COMMAND ""
+    PATCH_COMMAND ${EXEC} git am --3way ${CMAKE_CURRENT_SOURCE_DIR}/highway-*.patch
     CONFIGURE_COMMAND ${EXEC} cmake -H<SOURCE_DIR> -B<BINARY_DIR>
         -DCMAKE_BUILD_TYPE=Release
         -DCMAKE_INSTALL_PREFIX=${MINGW_INSTALL_PREFIX}
-- 
2.40.0

